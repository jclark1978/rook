# Rook Room Progress Report â€” 2026-02-19

## Branching, commits, and merge
- Created feature branch: `feat/mobile-gui-optimization`.
- Implemented and tested a full mobile/desktop optimization pass plus gameplay/UI updates.
- Committed feature work (`50c9f1c`), merged into `main` (`fea64c9`), rebased on `origin/main`, and pushed.
- Remote `origin/main` advanced to `c93a3ef`.

## Mobile and desktop GUI improvements
- Reworked iPhone/Safari-first responsiveness and scaling behavior.
- Reduced card footprint and improved fit so more of the game is visible without excessive scrolling.
- Updated portrait layout so trick cards are above hand cards with better proportional usage.
- Ensured table center/trick-play area remains visible and functional in vertical mobile mode.
- Matched mobile layout to provided mockups, including player name placement around table.
- Added left/right name spacing fix in portrait mode.
- Added active-turn underline on player names.
- Restored missing desktop names/flags and corrected desktop seat positioning/centering.
- Standardized top/bottom seat pill sizing to dynamic width behavior.
- Added trump-color border around the full trick-play square (desktop and mobile).
- Fixed trick card number alignment/scaling when cards are played.
- Removed redundant dealer/turn indicators in table-seat where requested, while preserving dealer flag in seat-pill where needed.

## Bidding and phase UX updates
- Added mobile bidding indicators by seat name row:
  - `Bidding` (green scheme)
  - `Bid N` (black scheme)
  - `Pass` (red scheme)
  - `Pass Partner` (yellow scheme)
- Kept status pills on the same horizontal line as player names.
- Added post-bid status display and bid-winner indicators.
- During kitty pickup and trump declaration phases:
  - Removed unnecessary action card.
  - Moved waiting message to inline line below seat-strip.
  - Moved bidder controls into hand card.
  - Preserved preferred table-right/hand-left desktop arrangement.
  - Kept full-width hand card behavior on portrait mobile.
- Added auto-minimize behavior for previous-hand panel when next trick begins.

## Rules and gameplay logic updates
- Enforced bid range max of 200 (min 100, max 200).
- Added UI validation/clamping for bid controls.
- Implemented include/exclude low cards rule (2/3/4):
  - Dealer option available.
  - Default is exclude 2/3/4 (`fast` deck mode).
  - Excluding low cards deals 10 cards/player; including deals 13.
- Updated server/engine deal flow so deck mode is honored consistently.
- Ensured next hand resets to default `fast` behavior unless changed by dealer.

## Error handling and lobby UX
- Fixed create/join room error visibility so errors render in the modal, not behind blurred background.
- Improved copy for duplicate room ID: `Game ID already in use.`

## Ops/scripts cleanup
- Added/standardized `stop_server.sh` behavior to stop PID-tracked and stray dev processes.
- Updated startup messaging to reference `./stop_server.sh`.
- Removed legacy duplicate `stop_server` wrapper for naming consistency.

## Verification and test status
- Web build passes: `npm run -w @rook/web build`.
- Server tests pass: `npm run -w @rook/server test`.
- Engine tests pass: `npm run -w @rook/engine test`.

## Files touched (high level)
- `apps/web/src/App.tsx`
- `apps/web/src/App.css`
- `apps/web/src/index.css`
- `apps/web/index.html`
- `apps/server/src/index.ts`
- `apps/server/src/game.ts`
- `apps/server/src/game.test.ts`
- `packages/rook-engine/src/bidding.ts`
- `packages/rook-engine/src/index.ts`
- `packages/rook-engine/test/bidding.test.ts`
- `start_server.sh`
- `stop_server.sh`
