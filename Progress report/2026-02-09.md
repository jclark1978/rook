# Progress Report â€” 2026-02-09

## Summary
Major gameplay milestone day: dealer rotation + left-of-dealer bidding start, trick capture tracking, end-of-hand scoring + summary + next-hand loop. Also stabilized connectivity/rejoin issues and fixed several Rook/trump legality bugs.

## Gameplay / Rules Engine
- Enforced **Rook counts as trump for follow-suit when trump is led**.
- Fixed **Rook lead** to correctly set the trick lead color to **trump**, so players holding trump must follow.

## Server (authoritative)
- Added **dealer rotation clockwise** each hand.
- Bidding now starts **left of the dealer** each hand.
- Implemented **capture tracking** of completed tricks:
  - captured cards tracked per team
  - tracked last-trick winner team
- Implemented **end-of-hand scoring**:
  - last-trick + kitty points
  - contract resolution (set = -bid)
  - cumulative game score
- Implemented **hand summary** state + **next-hand** flow.

## Web UI
- Added **dealer indicator**.
- Added **hand summary screen** and **Next Hand** button.
- Improved trick UI reliability (rendering of trick pile entries).

## Reliability / Rejoin
- Fixed identity issues causing players to lose seat after reconnect by introducing a stable client player id.
- Fixed mid-game rejoin sync:
  - on room join, server syncs game/hand state to the joining socket.

## Notable Fixes
- Corrected multiple merge/test mismatches introduced during worktree merges (state shape + expectations).

## Validation
- All unit tests passing (`npm test`).
